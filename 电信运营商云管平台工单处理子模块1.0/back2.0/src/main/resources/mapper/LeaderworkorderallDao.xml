<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.back2.dao.LeaderworkorderallDao">

    <resultMap type="com.example.back2.entity.Leaderworkorderall" id="LeaderworkorderallMap">
        <result property="name" column="name" jdbcType="VARCHAR"/>
        <result property="workOrderNum" column="work_order_num" jdbcType="VARCHAR"/>
        <result property="workOrderType" column="work_order_type" jdbcType="VARCHAR"/>
        <result property="expirationTime" column="expiration_time" jdbcType="TIMESTAMP"/>
        <result property="workOrderName" column="work_order_name" jdbcType="VARCHAR"/>
        <result property="workerNum" column="worker_num" jdbcType="INTEGER"/>
        <result property="file" column="file" jdbcType="VARCHAR"/>
        <result property="workOrderState" column="work_order_state" jdbcType="VARCHAR"/>
        <result property="reason" column="reason" jdbcType="VARCHAR"/>
        <result property="price" column="price" jdbcType="NUMERIC"/>
        <result property="offlineReason" column="offline_reason" jdbcType="VARCHAR"/>
    </resultMap>

<!--    查询所有工单-->
    <select id="selectAll" resultMap="LeaderworkorderallMap">
        select
            `name`,
            work_order_num,
            work_order_type,
            expiration_time,
            work_order_name,
            file,
            worker_num,
            work_order_state,
            reason,
            price
        from leaderWorkOrderAll
    </select>



    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="LeaderworkorderallMap">
        select name,
               work_order_num,
               work_order_type,
               expiration_time,
               work_order_name,
               worker_num,
               file,
               work_order_state,
               reason,
               price,
               offline_reason
        from brccq2.leaderWorkOrderAll limit #{offset}, #{limit}
    </select>

    <select id="selectall" resultMap="LeaderworkorderallMap">
        select work_order_num,
               work_order_type,
               expiration_time,
               work_order_name,
               worker_num,
               name,
               file,
               work_order_state,
               reason,
               price,
               offline_reason
        from leaderWorkOrderAll
    </select>


    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="LeaderworkorderallMap">
        select
        name, work_order_num, work_order_type, expiration_time, work_order_name, worker_num, file, work_order_state,
        reason, price, offline_reason
        from brccq2.leaderWorkOrderAll
        <where>
            <if test="name != null and name != ''">
                and name = #{name}
            </if>
            <if test="workOrderNum != null and workOrderNum != ''">
                and work_order_num = #{workOrderNum}
            </if>
            <if test="workOrderType != null and workOrderType != ''">
                and work_order_type = #{workOrderType}
            </if>
            <if test="expirationTime != null">
                and expiration_time = #{expirationTime}
            </if>
            <if test="workOrderName != null and workOrderName != ''">
                and work_order_name = #{workOrderName}
            </if>
            <if test="workerNum != null">
                and worker_num = #{workerNum}
            </if>
            <if test="file != null and file != ''">
                and file = #{file}
            </if>
            <if test="workOrderState != null and workOrderState != ''">
                and work_order_state = #{workOrderState}
            </if>
            <if test="reason != null and reason != ''">
                and reason = #{reason}
            </if>
            <if test="price != null">
                and price = #{price}
            </if>
            <if test="offlineReason != null and offlineReason != ''">
                and offline_reason = #{offlineReason}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="" useGeneratedKeys="true">
        insert into brccq2.leaderWorkOrderAll(name, work_order_num, work_order_type, expiration_time, work_order_name,
                                              worker_num, file, work_order_state, reason, price, offline_reason)
        values (#{name}, #{workOrderNum}, #{workOrderType}, #{expirationTime}, #{workOrderName}, #{workerNum}, #{file},
                #{workOrderState}, #{reason}, #{price}, #{offlineReason})
    </insert>

    <insert id="insertBatch" keyProperty="" useGeneratedKeys="true">
        insert into brccq2.leaderWorkOrderAll(name, work_order_num, work_order_type, expiration_time, work_order_name,
        worker_num, file, work_order_state, reason, price, offline_reason)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.name}, #{entity.workOrderNum}, #{entity.workOrderType}, #{entity.expirationTime},
            #{entity.workOrderName}, #{entity.workerNum}, #{entity.file}, #{entity.workOrderState}, #{entity.reason},
            #{entity.price}, #{entity.offlineReason})
        </foreach>
    </insert>

</mapper>

